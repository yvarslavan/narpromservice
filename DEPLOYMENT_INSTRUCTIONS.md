# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –ø—Ä–æ–µ–∫—Ç–∞ NAR Prom Service

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –¥–µ–ø–ª–æ–π –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤

### 1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É**
```bash
ssh root@your-server-ip
cd /var/www/narpromservice
```

### 2. **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–∫—É—â–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤**
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞ –ø–æ—Ä—Ç—É 3000
netstat -tulpn | grep :3000

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –Ω–∞ –ø–æ—Ä—Ç—É 3000
sudo kill -9 $(lsof -t -i:3000)

# –ò–ª–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—Å–µ node –ø—Ä–æ—Ü–µ—Å—Å—ã
pkill -f node

# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å PM2
pm2 stop all
pm2 delete all
```

### 3. **–û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ Next.js**
```bash
# –£–¥–∞–ª—è–µ–º –ø–∞–ø–∫—É —Å–±–æ—Ä–∫–∏
rm -rf .next

# –û—á–∏—â–∞–µ–º npm –∫—ç—à (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
npm cache clean --force
```

### 4. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
```bash
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º/–æ–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
npm install

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–æ—Å—å
npm list --depth=0
```

### 5. **–°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞**
```bash
# –°–æ–∑–¥–∞–µ–º production —Å–±–æ—Ä–∫—É
npm run build

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ø–µ—à–Ω–æ—Å—Ç—å —Å–±–æ—Ä–∫–∏
echo "Build completed successfully!"
```

### 6. **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞**

#### **–í–∞—Ä–∏–∞–Ω—Ç A: –ü—Ä—è–º–æ–π –∑–∞–ø—É—Å–∫**
```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º –≤ production —Ä–µ–∂–∏–º–µ
npm start

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏–ª—Å—è
curl http://localhost:3000
```

#### **–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ PM2 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º PM2 –≥–ª–æ–±–∞–ª—å–Ω–æ (–¢–û–õ–¨–ö–û –ü–†–ò –ü–ï–†–í–û–ô –£–°–¢–ê–ù–û–í–ö–ï!)
npm install -g pm2

# –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —á–µ—Ä–µ–∑ PM2
pm2 start npm --name "narpromservice" -- start

# –°–æ—Ö—Ä–∞–Ω—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é PM2
pm2 save

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
pm2 status
pm2 logs narpromservice
```

## üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ PM2

### **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2 (—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑):**
```bash
# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º PM2 –≥–ª–æ–±–∞–ª—å–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
npm install -g pm2

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
pm2 startup
pm2 save
```

### **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã PM2 (–ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏):**
```bash
# –ó–∞–ø—É—Å–∫
pm2 start narpromservice

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
pm2 stop narpromservice

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 restart narpromservice

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞
pm2 reload narpromservice

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
pm2 logs narpromservice

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
pm2 monit

# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pm2 status
```

### 7. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏**
```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç
curl -I http://localhost:3000

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å PM2)
pm2 logs narpromservice --lines 50

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤
netstat -tulpn | grep :3000
```

## üö® –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### **–ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç 3000 –∑–∞–Ω—è—Ç**
```bash
# –ù–∞—Ö–æ–¥–∏–º –ø—Ä–æ—Ü–µ—Å—Å
lsof -i :3000

# –£–±–∏–≤–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å
sudo kill -9 <PID>

# –ò–ª–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º —á–µ—Ä–µ–∑ PM2
pm2 restart narpromservice
```

### **–ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏**
```bash
# –û—á–∏—â–∞–µ–º –∫—ç—à –∏ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º
rm -rf .next
rm -rf node_modules
npm install
npm run build
```

### **–ü—Ä–æ–±–ª–µ–º–∞: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å**
```bash
# –û—á–∏—â–∞–µ–º npm –∫—ç—à
npm cache clean --force

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
rm -rf node_modules package-lock.json
npm install
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### **–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
```
/var/www/narpromservice/
‚îú‚îÄ‚îÄ components/sections/NewsSection.tsx
‚îú‚îÄ‚îÄ components/ui/Card.tsx
‚îú‚îÄ‚îÄ components/ui/ImageModal.tsx
‚îú‚îÄ‚îÄ app/news/fountain-construction/page.tsx
‚îî‚îÄ‚îÄ public/videos/
    ‚îú‚îÄ‚îÄ fountain-construction-1.mp4
    ‚îú‚îÄ‚îÄ fountain-construction-2.mp4
    ‚îú‚îÄ‚îÄ fountain-construction-3.mp4
    ‚îú‚îÄ‚îÄ fountain-construction-4.mp4
    ‚îî‚îÄ‚îÄ fountain-construction-5.mp4
```

## üéØ –ü–æ–ª–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `deploy.sh` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
#!/bin/bash
echo "üöÄ Starting deployment..."

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–∏ PM2
if ! command -v pm2 &> /dev/null; then
    echo "‚ö†Ô∏è  PM2 –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º..."
    npm install -g pm2
    pm2 startup
fi

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
echo "üõë Stopping processes..."
pkill -f node
sleep 2

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
echo "üßπ Cleaning cache..."
rm -rf .next

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
echo "üì¶ Installing dependencies..."
npm install

# –°–±–æ—Ä–∫–∞
echo "üî® Building project..."
npm run build

# –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ PM2
echo "üöÄ Starting with PM2..."
pm2 start npm --name "narpromservice" -- start
pm2 save

echo "‚úÖ Deployment completed!"
pm2 status
```

### **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞:**
```bash
chmod +x deploy.sh
./deploy.sh
```

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:**
```bash
# –õ–æ–≥–∏ PM2
pm2 logs narpromservice --lines 100

# –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
journalctl -u narpromservice -f

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
curl -s -o /dev/null -w "%{http_code}" http://localhost:3000
```

### **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
pm2 monit

# –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
htop
free -h
df -h
```

## üìù –ß–µ–∫-–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è

- [ ] –ü–æ–¥–∫–ª—é—á–∏–ª—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
- [ ] –û—Å—Ç–∞–Ω–æ–≤–∏–ª —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
- [ ] –û—á–∏—Å—Ç–∏–ª –∫—ç—à Next.js
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏–ª –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [ ] –£—Å–ø–µ—à–Ω–æ —Å–æ–±—Ä–∞–ª –ø—Ä–æ–µ–∫—Ç
- [ ] –ó–∞–ø—É—Å—Ç–∏–ª —Å–µ—Ä–≤–µ—Ä
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
- [ ] –£–±–µ–¥–∏–ª—Å—è, —á—Ç–æ –Ω–æ–≤–æ—Å—Ç–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª —Ä–∞–±–æ—Ç—É –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –¥–ª—è –≤–∏–¥–µ–æ

## üÜò –≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

```bash
# –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å Git)
git reset --hard HEAD~1

# –ò–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
cp -r backup/narpromservice /var/www/

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
reboot
```

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –í—Å–µ–≥–¥–∞ –¥–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º!
```bash
cp -r /var/www/narpromservice /var/www/narpromservice.backup.$(date +%Y%m%d_%H%M%S)
```
